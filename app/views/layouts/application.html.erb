<!DOCTYPE html>
<html lang="pt">
  <head>
    <title>Relat√≥rios de Alunos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
      <!-- Styles -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
    <!-- Or for RTL support -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.rtl.min.css" />

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>
    <!-- Gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/billboard.js@3.12.4/dist/billboard.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/billboard.js@3.12.4/dist/billboard.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js"></script>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="https://englishglobe.com.br/assets/img/favicon-32x32.png"
    />

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>

    <style>
      /* Adiciona uma transi√ß√£o suave ao trocar de tema */
      body {
        transition: background-color 0.3s, color 0.3s;
      }
    </style>
  </head>

  <body>
    <%= render "layouts/menu" %>

    <div class="container py-3">
      <% if flash[:notice] %>
        <div class="alert alert-success"><%= flash[:notice] %></div>
      <% end %>
      <% if alert %>
        <div class="alert alert-warning"><%= alert %></div>
      <% end %>
      
      <%= yield %>
    </div>


     <script>
      
      document.addEventListener("turbo:load", function () {
        const toggleButton = document.getElementById("theme-toggle");
        const htmlElement = document.documentElement;
        const storedTheme = localStorage.getItem("theme") || "light";

        // Fun√ß√£o para aplicar o tema
        function applyTheme(theme) {
          htmlElement.setAttribute("data-bs-theme", theme);
          localStorage.setItem("theme", theme);
          updateButtonLabel(theme);
        }

        // Atualiza o texto do bot√£o com base no tema
        function updateButtonLabel(theme) {
          toggleButton.textContent = theme === "dark" ? "‚òÄÔ∏è" : "üåô";
        }

        // Aplica o tema salvo ao carregar a p√°gina
        applyTheme(storedTheme);

        // Remove qualquer event listener duplicado antes de adicionar
        toggleButton.replaceWith(toggleButton.cloneNode(true));
        document.getElementById("theme-toggle").addEventListener("click", function () {
          const currentTheme = htmlElement.getAttribute("data-bs-theme");
          const newTheme = currentTheme === "light" ? "dark" : "light";
          applyTheme(newTheme);
        });
      });


    </script>
  </body>
</html>
